(function(f,d,e,a,c){var b={table:".group_buy",input:".group_input",numAttr:"maxnum",buy:".buy_btn,.againbuy_btn",idAttr:"lotoorder",form:"/order/groupBuy_order_participate.html",isAlertPayDialog:false},g=function(j,k){d.dialog?d.dialog(j,k):(f.alert(j),k())},h=function(m,k){var l=[],j,n=encodeURIComponent;for(j in k){l.push(n(j)+"="+n(k[j]))}return m+(m.indexOf("?")+1?"&":"?")+l.join("&")},i={ready:function(j){return d(j.table).each(function(){d(this).find(j.input).each(function(){d(this).css("ime-mode","disabled");this.autocomplete="off";this.maxnum=+((d(this).attr(j.numAttr)||"0").replace(/\D/g,""));this.maxnum?i.blur.call(this):d(this).closest("tr").remove()}).end().find(j.buy).each(function(){this.order=d(this).attr(j.idAttr)||"";this.order||d(this).closest("tr").remove()}).end()})},submit:function(k,m){var l=["<form method='post' target='_blank' action='"+k+"'>"],j,n=m||{};for(j in n){l.push("<input type='hidden' name='"+j+"' value='"+n[j]+"'/>")}d(l.join("")+"</form>").appendTo(document.body)[0].submit()},focus:function(){if(!/^\d+$/g.test(this.value)){this.value="";this.style.color="#000"}},blur:function(){var j=this.maxnum;if(!/^\d+$/g.test(d.trim(this.value))){this.value=["剩",j>999?"":"余"," ",j+" 份"].join("");this.style.color="#9b9b9b"}},keypress:function(m){var j=this.maxnum,o=d.trim(this.value),l=m.charCode||m.keyCode,k;if(l==0||m.ctrlKey||m.altKey||l<32||(l>36&&l<41)||l==46){return true}k=String.fromCharCode(l);if(k.search(/\D/)>=0||(!o&&k=="0")){return false}var n=this;f.setTimeout(function(){var p=+n.value;if(p>j){n.value=j}else{if(p==0){n.value=""}}},16)},paste:function(){return false},buyClick:function(n,p){var m=d(this),o=this.order,l=m.closest("tr").find(p.input),k=p.form;if(!o||!l[0]){return}if(!/^\d+$/g.test(l[0].value)){g("认购份数格式不正确",function(){l.val("").focus()});n.preventDefault();return}var j={participantBuyPieces:l.val(),lotteryOrderId:o,activityType:37};if(p.isAlertPayDialog){e.loadJS(e.cdnUrl+"/js2/pay/pay.js",function(){return !!e.pay},function(){e.pay.toPay({data:j,orderType:4})})}else{(f.login===c?a.isLogin(true):f.login)?i.submit(k,j):a.login(h(k,j))}n.preventDefault()}};e.groupBuy=function(k,j){var m=j||k,l;if(typeof k=="string"){if(!j){m={table:k}}else{m.table=k}}m=d.extend({},b,m);l=i.ready(m).each(function(){d(this).delegate(m.input,"focusin",i.focus).delegate(m.input,"focusout",i.blur).delegate(m.input,"keypress",i.keypress).delegate(m.input,"paste",i.paste).delegate(m.buy,"click",function(n){return i.buyClick.call(this,n,m)})})};e.countDown=function(){var r=f.gameEn==="d11"?"11选5":(f.gameEn==="jxd11"?"老11选5":"广东11选5"),v=d("#kj_ing"),p=d("#kj_list"),u=d("#kj_result"),n,m,o,l;if(typeof f.secondsLeft!=="undefined"&&parseInt(f.secondsLeft)>0){lotteryRetime.prototype.setText=function(x,w){x.text.innerHTML="离截止时间还有：<em>"+w[2]+"</em>分<em>"+w[3]+"</em>秒"};d("#group_retime").addClass("end_time endTime_minute").show()}function k(z){var z=z/1000;var A=Math.floor(z%60);var y=Math.floor((z/60)%60);var w=Math.floor((z/3600)%24);var x=Math.floor(z/86400);x=x<10?"0"+x:x;w=w<10?"0"+w:w;A=A<10?"0"+A:A;y=y<10?"0"+y:y;return{d:x,h:w,m:y,s:A}}function t(x){var w="http://caipiao.163.com/order/preBet_periodAndAwardTime.html?gameEn="+f.gameEn;d.getJSON(w,{stamp:(new Date()).getTime()},function(y){x&&x(y)});f.clearTimeout(n);n=f.setTimeout(function(){t(q)},30000)}function j(w){u.show();v.hide();q(w)}function q(w){var z,y;z=+w.previousPeriod.slice(-6);y=p.find("tr:first td:eq(0)").text();y=+jQuery.trim(y);if(w.previousPeriod.indexOf(u.find("em:eq(0)").html())<0){f.clearInterval(m);if(z>y){p.prepend("<tr><td>&nbsp;"+w.previousPeriod.slice(-6)+'</td><td><em class="c_939393">等待开奖中</em></td><td>--</td><td>--</td></tr>').find("tr:last").remove()}if(w.awardSecondsLeft>0){awardTime=w.awardSecondsLeft;function x(){if(awardTime<0){function B(){u.html("&nbsp;"+r+'&nbsp;第&nbsp;<em class="c_ba2636">'+w.previousPeriod+'</em>&nbsp;期&nbsp;开奖<br><span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span><br>正在获取开奖号码...'+(anTime>=0?anTime:"0")).show();v.hide();p.find("tr:first em").addClass("c_ba2636").removeClass("c_939393").html("开奖中...");if(anTime<0){f.clearInterval(l);s()}else{anTime-=1;l=f.setTimeout(B,1000)}}f.clearInterval(o);f.clearInterval(l);anTime=40;B()}else{var A=k(awardTime);u.hide();v.html(r+'&nbsp;第&nbsp;<em class="c_ba2636">'+w.previousPeriod+'</em>&nbsp;期&nbsp;等待开奖中<p class="countdown"><i></i>'+A.m+":"+A.s+"</p>").show();awardTime-=1000;o=f.setTimeout(x,1000)}}f.clearInterval(o);x()}else{f.clearInterval(o);f.clearInterval(l);v.hide();u.html("&nbsp;"+r+'&nbsp;第&nbsp;<em class="c_ba2636">'+w.previousPeriod+'</em>&nbsp;期&nbsp;开奖<br><span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span>&nbsp;<span class="iconBred">?</span><br>正在获取开奖号码...').show();s()}}else{u.show();v.hide()}}function s(){var w=function(y){var z=Number(y);if(z){return z.toString()}else{return y}};function x(){var y="/order/preBet_resentAwardNum.html?gameEn="+f.gameEn;d.getJSON(y,{stamp:(new Date()).getTime()},function(z){if(z&&z.latestPeriods&&z.latestPeriods.length){var A=z.latestPeriods[0].period;d("table.index_table").show();if(A===u.find("em:eq(0)").html()){p.html("");d.each(z.latestPeriods,function(G,E){var J=this,C=J.number,F=C.split(" "),K=0,M=0,B=0,H=0,I=J.period;for(var D=0,L=F.length;D<L;D++){F[D]>5?K+=1:M+=1;F[D]%2==0?H+=1:B+=1}p.append(d("<tr></tr>").html(["<td>&nbsp;",I.slice(-6),'</td><td><em class="c_ba2636">',C,"</em></td><td>",K+":"+M,"</td><td>",B+":"+H,"</td>"].join("")));if(0==G){u.html(" "+r+'  第 <em class="c_ba2636">'+I+'</em> 期 开奖<br><span class="iconBred">'+F[0]+'</span>&nbsp;<span class="iconBred">'+F[1]+'</span>&nbsp;<span class="iconBred">'+F[2]+'</span>&nbsp;<span class="iconBred">'+F[3]+'</span>&nbsp;<span class="iconBred">'+F[4]+"</span><br>今天已售&nbsp;"+w(I.slice(-2))+"&nbsp;期，还剩&nbsp;"+w((78-I.slice(-2)))+"&nbsp;期")}});f.clearInterval(m)}else{f.clearInterval(m);m=f.setTimeout(function(){x()},2000)}}else{f.clearInterval(m);m=f.setTimeout(function(){x()},2000)}})}u.show();v.hide();f.clearInterval(m);x()}t(j)};if(/^(d11|gdd11|jxd11)$/.test(f.gameEn)){e.countDown()}})(window,jQuery,Core,easyNav);